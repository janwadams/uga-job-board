/* comprehensive mobile fixes for all roles and pages */

/* prevent horizontal scroll globally */
* {
  box-sizing: border-box;
}

/* general mobile fixes */
@media (max-width: 768px) {
  /* prevent horizontal scroll on all pages */
  html, body {
    overflow-x: hidden;
    max-width: 100vw;
    margin: 0;
    padding: 0;
  }

  /* fix all containers to prevent overflow */
  div, section, main, header, nav {
    max-width: 100vw;
    overflow-x: hidden;
  }

  /* fix job cards that have badges cutting off */
  .relative {
    overflow: hidden;
  }

  /* fix position of external/uga badges */
  .absolute.top-0.right-0,
  .absolute.-top-2.-right-2,
  span[class*="absolute"][class*="right"] {
    position: absolute !important;
    right: 0.5rem !important;
    top: 0.5rem !important;
    transform: none !important;
  }

  /* ensure job cards don't overflow */
  .border.bg-white.rounded-lg {
    position: relative;
    overflow: hidden;
    max-width: 100%;
  }

  /* fix main content padding to prevent edge cutting */
  main {
    padding-left: 0.75rem !important;
    padding-right: 0.75rem !important;
  }

  /* fix main container padding */
  .max-w-7xl {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }

  /* fix grid gaps that cause overflow */
  .grid {
    gap: 0.5rem !important;
    padding: 0 0.25rem;
  }

  /* ensure cards stay within bounds */
  .grid > div {
    max-width: 100%;
    overflow: hidden;
  }

  /* fix badge positioning specifically */
  .bg-green-100.text-green-800,
  .bg-blue-100.text-blue-800,
  .bg-yellow-100.text-yellow-800 {
    position: relative !important;
    display: inline-block;
    margin-left: auto;
  }

  /* fix NEW badge */
  .px-2.py-0\\.5.bg-yellow-100 {
    position: relative !important;
    margin-left: 0.25rem;
  }

  /* === navigation fixes === */
  header {
    min-height: 60px;
  }

  nav, header {
    padding: 0.75rem 1rem;
  }

  /* fix UGA header logo and nav buttons */
  .bg-uga-red {
    flex-wrap: wrap;
    padding: 0.5rem;
  }

  /* make buttons stack properly on mobile */
  nav button, 
  nav a {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    white-space: nowrap;
  }

  /* fix sign up/login buttons in header */
  nav .flex {
    gap: 0.5rem;
  }

  /* === faculty dashboard fixes === */
  /* fix faculty dashboard button row */
  .max-w-7xl .flex.gap-4 {
    flex-wrap: wrap;
  }
  
  /* stack faculty dashboard buttons on mobile */
  .max-w-7xl .flex.gap-4 > a,
  .max-w-7xl .flex.gap-4 > button {
    flex: 1 1 100%;
    width: 100%;
  }
  
  /* fix faculty metrics grid to 2 columns */
  .grid.md\:grid-cols-5 {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.75rem;
  }
  
  /* make the applications card span full width */
  .grid.md\:grid-cols-5 > div:last-child {
    grid-column: 1 / -1;
  }
  
  /* fix faculty dashboard title and buttons container */
  .flex.justify-between.items-center.mb-8 {
    flex-direction: column;
    gap: 1rem;
    align-items: stretch;
  }
  
  /* ensure faculty buttons are full width and properly styled */
  .bg-purple-600,
  .bg-blue-600,
  .bg-red-700 {
    width: 100%;
    text-align: center;
    justify-content: center;
  }

  /* === admin dashboard fixes === */
  /* fix admin button row that was overflowing */
  .flex.space-x-4 {
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }

  /* make admin navigation buttons stack properly */
  .flex.space-x-4 > a > button,
  .flex.space-x-4 > button {
    min-width: 100px;
    font-size: 0.75rem;
    padding: 0.5rem;
  }

  .flex.space-x-4 > * {
    flex: 1 1 calc(50% - 0.25rem);
    min-width: 120px;
    font-size: 0.75rem;
    padding: 0.5rem;
  }

  /* fix admin tables */
  .overflow-x-auto {
    max-width: calc(100vw - 1.5rem);
  }

  table {
    font-size: 0.75rem;
  }

  th, td {
    padding: 0.375rem;
    font-size: 0.75rem;
  }

  /* === faculty dashboard specific === */
  /* fix faculty dashboard header layout */
  .bg-gray-50 .flex.justify-between.items-center.mb-8 {
    flex-direction: column;
    gap: 1rem;
    align-items: stretch;
  }
  
  /* stack faculty dashboard action buttons vertically */
  .bg-gray-50 .flex.gap-4 {
    flex-direction: column;
    gap: 0.75rem;
  }
  
  /* make faculty buttons full width on mobile */
  .bg-gray-50 .flex.gap-4 > a {
    width: 100%;
  }
  
  .bg-gray-50 .flex.gap-4 button {
    width: 100%;
    justify-content: center;
  }
  
  /* fix faculty metrics grid - change from 5 cols to 2 cols */
  .grid.md\:grid-cols-5 {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.75rem;
  }
  
  /* make the applications card (last one) span full width */
  .grid.md\:grid-cols-5 > div:last-child {
    grid-column: 1 / -1;
  }
  
  /* shorten button text on mobile for faculty dashboard only */
  @media (max-width: 480px) {
    /* Only target buttons within faculty dashboard context */
    .bg-gray-50 .flex.gap-4 .bg-purple-600.text-white span {
      display: none;
    }
    .bg-gray-50 .flex.gap-4 .bg-purple-600.text-white::after {
      content: "Applications";
    }
    .bg-gray-50 .flex.gap-4 .bg-blue-600.text-white span {
      display: none;
    }
    .bg-gray-50 .flex.gap-4 .bg-blue-600.text-white::after {
      content: "Analytics";
    }
    .bg-gray-50 .flex.gap-4 .bg-red-700.text-white span {
      display: none;
    }
    .bg-gray-50 .flex.gap-4 .bg-red-700.text-white::after {
      content: "+ New Job";
    }
  }

  /* === faculty dashboard specific - more aggressive fixes === */
  /* fix faculty dashboard header and buttons */
  div.max-w-7xl > div.flex.justify-between.items-center.mb-8 {
    flex-direction: column !important;
    gap: 1rem !important;
    align-items: stretch !important;
  }
  
  /* force faculty buttons container to stack */
  div.max-w-7xl div.flex.gap-4:has(a[href*="/faculty/"]) {
    flex-direction: column !important;
    gap: 0.75rem !important;
    width: 100% !important;
  }
  
  /* make each faculty button full width */
  div.max-w-7xl div.flex.gap-4 a[href*="/faculty/"] {
    width: 100% !important;
    display: block !important;
  }
  
  div.max-w-7xl div.flex.gap-4 a[href*="/faculty/"] button {
    width: 100% !important;
    justify-content: center !important;
    white-space: normal !important;
    padding: 0.75rem 1rem !important;
  }
  
  /* fix the metrics grid specifically for faculty (5 column grid) */
  div.grid.grid-cols-1.md\:grid-cols-5 {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.5rem !important;
  }
  
  /* make applications card span full width */
  div.grid.grid-cols-1.md\:grid-cols-5 > div:last-child {
    grid-column: span 2 !important;
  }
  
  /* fix purple, blue, and red buttons specifically */
  button.bg-purple-600,
  button.bg-blue-600,
  button.bg-red-700 {
    width: 100% !important;
    max-width: 100% !important;
    white-space: normal !important;
  }

  /* === rep dashboard specific === */
  /* fix rep dashboard header and button layout */
  .bg-gray-50 .max-w-7xl > div.flex.justify-between.items-center.mb-8 {
    flex-direction: column !important;
    gap: 1rem !important;
    align-items: stretch !important;
  }
  
  /* stack rep dashboard buttons vertically */
  .bg-gray-50 .flex.gap-3 {
    flex-direction: column !important;
    gap: 0.75rem !important;
    width: 100% !important;
  }
  
  /* make rep buttons full width on mobile */
  .bg-gray-50 .flex.gap-3 > a {
    width: 100% !important;
  }
  
  .bg-gray-50 .flex.gap-3 button {
    width: 100% !important;
    justify-content: center !important;
    white-space: normal !important;
    text-align: center !important;
    padding: 0.75rem 1rem !important;
  }
  
  /* fix rep metrics grid - 5 cards to 2 columns */
  .grid.md\:grid-cols-5:has(div:nth-child(5)) {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.75rem !important;
  }
  
  /* make the 5th metric card (archived) span full width */
  .grid.md\:grid-cols-5:has(div:nth-child(5)) > div:nth-child(5) {
    grid-column: span 2 !important;
  }
  
  /* ensure application count stays on same line as text */
  .bg-purple-600 button {
    white-space: nowrap !important;
  }
  
  /* fix tab navigation for rep dashboard with scroll indicator */
  nav.flex.space-x-8 {
    gap: 1rem !important;
    overflow-x: auto !important;
    position: relative !important;
  }
  
  nav.flex.space-x-8 > button {
    white-space: nowrap !important;
    min-width: fit-content !important;
  }
  
  /* add arrow indicator to show more tabs are available */
  nav.flex.space-x-8::after {
    content: "→";
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    background: white;
    padding: 5px;
    font-size: 20px;
    color: #666;
    animation: pulse 2s infinite;
    pointer-events: none;
    z-index: 10;
  }
  
  /* animate the arrow to draw attention */
  @keyframes pulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
  }

  /* === content review page fixes === */
  /* fix stat cards grid */
  .grid.grid-cols-4 {
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
  }

  /* fix individual stat cards */
  .bg-white.rounded-lg.shadow.p-6 {
    padding: 0.75rem;
  }

  .bg-white.rounded-lg.shadow {
    margin: 0.5rem;
    padding: 1rem;
  }

  /* fix tab navigation with scroll indicator */
  nav.-mb-px {
    display: flex;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    position: relative;
  }

  nav.-mb-px::-webkit-scrollbar {
    display: none;
  }

  nav.-mb-px > button {
    flex-shrink: 0;
    white-space: nowrap;
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
  }
  
  /* add arrow indicator for general tab navigation too */
  nav.-mb-px::after {
    content: "→";
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    background: white;
    padding: 5px;
    font-size: 20px;
    color: #666;
    animation: pulse 2s infinite;
    pointer-events: none;
    z-index: 10;
  }

  /* === student dashboard fixes === */
  /* fix filter sidebar on mobile */
  .w-64 {
    width: 100%;
  }

  /* stack job type badges */
  .flex.flex-wrap.gap-2 {
    gap: 0.25rem;
  }

  /* === job posting pages === */
  /* fix job detail pages */
  .prose {
    max-width: 100%;
  }

  /* fix action buttons */
  .flex.gap-2 > button,
  .flex.gap-2 > a {
    flex: 1;
    min-height: 44px;
  }

  /* fix job cards on mobile */
  .p-6 {
    padding: 1rem;
  }

  .p-4 {
    padding: 0.75rem;
  }

  /* fix issue flags/badges */
  .px-2.py-1.rounded {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
  }

  .px-3.py-1 {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    min-width: 4rem;
  }

  /* fix job listing cards */
  .border.p-4.rounded {
    padding: 0.75rem;
    margin: 0.5rem 0;
  }

  /* === modal fixes === */
  /* ensure modals fit screen */
  .fixed.inset-0 {
    padding: 1rem;
  }

  .max-w-2xl, .max-w-md, .max-w-lg {
    max-width: calc(100vw - 2rem);
    margin: 1rem;
  }

  /* === text size adjustments === */
  .text-4xl {
    font-size: 1.75rem;
  }

  .text-3xl {
    font-size: 1.5rem;
  }

  .text-2xl {
    font-size: 1.25rem;
  }

  .text-xl {
    font-size: 1.125rem;
  }

  .text-sm {
    font-size: 0.875rem;
  }

  /* === button improvements === */
  button {
    min-height: 44px;
    touch-action: manipulation;
  }

  /* === card layouts === */
  /* stack cards on mobile */
  .grid-cols-1.md\\:grid-cols-2.xl\\:grid-cols-3 {
    grid-template-columns: 1fr;
  }

  /* fix text truncation */
  .truncate, .line-clamp-1 {
    max-width: 100%;
  }

  /* fix back to admin button position */
  .bg-gray-500.text-white {
    position: relative;
    margin-top: 0.5rem;
    width: auto;
  }
}

/* mobile-specific for index page job cards */
@media (max-width: 640px) {
  /* fix job card layout */
  .flex.justify-between.items-start {
    flex-direction: column;
    gap: 0.5rem;
  }

  /* stack badges vertically on very small screens */
  .flex.items-start.gap-2 {
    flex-wrap: wrap;
  }

  /* ensure description doesn't get cut off */
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  /* fix button row at bottom of cards */
  .flex.gap-2 {
    flex-direction: column;
  }

  .flex.gap-2 > * {
    width: 100%;
  }

  /* hide less important columns on mobile */
  th:nth-child(n+4),
  td:nth-child(n+4) {
    display: none;
  }
}

/* very small screens (phones in portrait) */
@media (max-width: 480px) {
  /* even smaller screens */
  .text-3xl {
    font-size: 1.5rem;
  }

  .text-xl {
    font-size: 1rem;
  }

  .text-lg {
    font-size: 0.875rem;
  }

  .text-base {
    font-size: 0.875rem;
  }

  .text-sm {
    font-size: 0.75rem;
  }

  /* stack all grid items on very small screens */
  .grid {
    grid-template-columns: 1fr !important;
  }

  /* single column layout */
  .grid-cols-1.md\\:grid-cols-2.xl\\:grid-cols-3 {
    grid-template-columns: 1fr !important;
  }

  /* reduce card padding to maximize space */
  .p-6 {
    padding: 0.75rem !important;
  }

  /* make all buttons full width on very small screens */
  button:not(.w-auto) {
    width: 100%;
  }

  /* fix navigation header */
  .flex.justify-between {
    flex-direction: column;
    gap: 0.75rem;
  }

  /* hide "back to admin" text, show arrow only */
  .bg-gray-500.text-white {
    padding: 0.5rem;
  }

  /* fix admin navigation buttons */
  .flex.space-x-4 > a,
  .flex.space-x-4 > button {
    flex: 1 1 calc(50% - 0.25rem);
  }

  /* hide table actions on very small screens */
  th:last-child,
  td:last-child {
    min-width: 100px;
  }

  /* single column for all grids */
  [class*="grid-cols-"] {
    grid-template-columns: 1fr !important;
  }
}

/* fix dropdown menus on mobile - but not password toggles */
.absolute.right-0:not(.password-toggle-btn):not(button[aria-label*="password"]) {
  right: auto;
  left: 50%;
  transform: translateX(-50%);
}

/* ensure modals are scrollable */
.overflow-y-auto {
  max-height: calc(100vh - 4rem);
}

/* prevent zoom on form inputs */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
textarea,
select {
  font-size: 16px !important;
}

/* ensure no horizontal scrollbars appear */
::-webkit-scrollbar-horizontal {
  display: none;
}

/* prevent any absolute positioned elements from causing overflow */
.absolute {
  max-width: 100%;
}

/* fix for specific issue badges */
.px-2.py-1.rounded {
  white-space: nowrap;
  font-size: 0.625rem;
}

/* fix student dashboard jobs not showing on mobile */
@media (max-width: 768px) {
  /* ensure main content is visible */
  .min-h-screen {
    min-height: auto;
  }

  /* fix the sidebar filter that might be covering content */
  .sticky.top-4 {
    position: relative !important;
    top: 0 !important;
  }

  /* ensure job grid is visible */
  .flex.gap-6 {
    flex-direction: column;
  }

  /* make sure content div is full width */
  .flex-1 {
    width: 100% !important;
    max-width: 100vw;
  }

  /* fix any transform that might push content off screen - but not password buttons */
  [class*="translate"]:not(button[aria-label*="password visibility"]) {
    transform: none !important;
  }

  /* ensure job cards are visible */
  .grid.gap-4.md\:grid-cols-2 {
    display: grid !important;
    grid-template-columns: 1fr !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  /* remove any negative margins that hide content */
  [class*="-m"] {
    margin: 0 !important;
  }
}

/* fix password field toggle icon positioning on mobile */
@media (max-width: 768px) {
  /* force password toggle buttons to stay on the right side */
  div[style*="position: relative"] > button[aria-label*="password visibility"] {
    position: absolute !important;
    right: 8px !important;
    left: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    z-index: 10 !important;
  }
  
  /* make sure password inputs have enough padding for the icon */
  input[type="password"],
  input[type="text"][name="password"],
  input[type="text"][name="confirmPassword"] {
    padding-right: 45px !important;
  }
  
  /* ensure placeholder text is visible */
  input::placeholder {
    color: #9ca3af;
    opacity: 1;
  }
}